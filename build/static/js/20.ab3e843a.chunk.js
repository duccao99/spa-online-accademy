(this["webpackJsonpspa-online-academy"]=this["webpackJsonpspa-online-academy"]||[]).push([[20],{373:function(e,t,a){"use strict";a.r(t);var o=a(8),c=a(17),n=a(6),i=a(352),r=a(505),s=a(348),l=a(341),d=a(424),u=a(425),b=a(453),j=a(452),g=a(451),h=a(642),p=a(84),m=a(153),_=a(54),O=a(392),f=a.n(O),x=a(393),v=a.n(x),k=a(20),y=a.n(k),S=a(96),C=a.n(S),w=a(382),N=a(0),B=a.n(N),I=a(68),M=a(12),z=a(87),D=a(16),R=a(2),T=Object(n.a)({root:{color:p.a[400],"&$checked":{color:p.a[600]}},checked:{}})((function(e){return Object(R.jsx)(h.a,Object(c.a)({color:"default"},e))})),A=Object(m.a)((function(e){return{icon:{marginRight:e.spacing(2)},heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(8,0,6)},heroButtons:{marginTop:e.spacing(4)},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)},card:{height:"100%",display:"flex",flexDirection:"column",boxShadow:"0 4px 8px rgb(0 1 1 / 10%)"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1},footer:{backgroundColor:e.palette.background.paper,padding:e.spacing(6)},root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},btn_sign_in:{color:"inherit",textDecoration:"none","&:visited":{color:"inherit",textDecoration:"none"}},ten_most_newest_courses:{textAlign:"center",marginTop:32,marginBottom:32},outstanding_courses:{textAlign:"center",marginTop:32,marginBottom:32},card_wrapper:{},link:{color:"inherit",textDecoration:"none","&:visited":{color:"inherit",textDecoration:"none"}},typo:{textAlign:"left"},card_action:{display:"flex",alignItems:"flex-end",height:"100%",position:"relative"},badge_bestSeller:{"& .MuiBadge-anchorOriginBottomLeftRectangle":{width:"100px"}},badge_mostView:{"& .MuiBadge-anchorOriginBottomLeftRectangle":{width:"100px",backgroundColor:"lightskyblue",color:"lightyellow",display:"none"}},badge_newest:{"& .MuiBadge-anchorOriginBottomLeftRectangle":{width:"100px",backgroundColor:"#e2e27a"}},sale:{textDecoration:"line-through;"},checkbox:{margin:0,marginBottom:-5},favo:{position:"absolute",top:0,right:0,zIndex:"1500!important",border:"none!important","& .MuiButtonBase-root":{border:"none!important",color:"#95f0ff"},"& .MuiButton-outlinedPrimary":{border:"none!important"}}}})),F={color:"secondary"};t.default=Object(I.b)((function(e){return{cart_global_state:e.cartReducer.cart}}),(function(e){return{dispatchAddToCart:function(t,a,o,c,n,i){e({type:z.a,payload:{course_id:t,course_price:o,course_ava:c,course_name:n,course_title:i,user_id:a}})}}}))((function(e){var t=e.course_avatar_url,a=e.course_fee,n=e.course_name,h=e.course_title,p=e.course_id,m=e.subject_name,O=e.user_name,x=e.is_finished,k=e.user_id,S=e.avg_rate,I=e.most_stu_enroll,z=e.most_view_courses,G=e.newest_courses,L=e.dispatchAddToCart,$=e.cart_global_state,U=e.isLogout,J=e.isUpdateFromPagi,P=e.setFavoComponentUpdate,E=e.favoComponentUpdate,V=e.course_favo_id,q=e.course_favo_status,H=Object(N.useState)(!1),K=Object(o.a)(H,2),Q=K[0],W=K[1],X=Object(N.useState)(!1),Y=Object(o.a)(X,2),Z=(Y[0],Y[1],Object(N.useState)(!1)),ee=Object(o.a)(Z,2),te=ee[0],ae=ee[1],oe=Object(N.useState)(!1),ce=Object(o.a)(oe,2),ne=ce[0],ie=ce[1],re=Object(N.useState)(0),se=Object(o.a)(re,2),le=se[0],de=se[1],ue=Object(N.useState)([]),be=Object(o.a)(ue,2),je=(be[0],be[1]),ge=Object(N.useState)(!1),he=Object(o.a)(ge,2),pe=he[0],me=he[1],_e=Object(N.useState)(!1),Oe=Object(o.a)(_e,2),fe=Oe[0],xe=Oe[1],ve=Object(N.useState)(""),ke=Object(o.a)(ve,2),ye=ke[0],Se=ke[1],Ce=Object(N.useState)(!1),we=Object(o.a)(Ce,2),Ne=we[0],Be=we[1],Ie=Object(N.useState)(0),Me=Object(o.a)(Ie,2),ze=Me[0],De=Me[1],Re=Object(N.useState)(x),Te=Object(o.a)(Re,2),Ae=Te[0],Fe=Te[1],Ge=Object(N.useState)(!1),Le=Object(o.a)(Ge,2),$e=Le[0],Ue=Le[1],Je=Object(N.useState)(!1),Pe=Object(o.a)(Je,2),Ee=Pe[0],Ve=Pe[1];function qe(e,t){var a="";a=void 0!==V?"".concat(D.b,"/api/student/is-favorite?course_id=").concat(V,"&user_id=").concat(e):"".concat(D.b,"/api/student/is-favorite?course_id=").concat(t,"&user_id=").concat(e),y.a.get(a,{}).then((function(e){Ve(e.data.is_favorite)})).catch((function(e){console.log(e.response)}))}var He=function(e){var t="".concat(D.b,"/api/student/toggle-favorite"),a={user_id:+sessionStorage.getItem("user_login_id"),course_id:p,is_favorite:Ee};void 0!==P&&null!==P&&P(!E),y.a.patch(t,a,{}).then((function(e){qe(a.user_id,a.course_id)}))};Object(N.useEffect)((function(){void 0!==q?Ve(q):qe(+sessionStorage.getItem("user_login_id"),p);var e=sessionStorage.getItem("user_role");De(+e),Object(w.debounce)((function(){var e="".concat(D.b,"/api/course/all-sales");y.a.get(e,{}).then((function(e){if(je(e.data.all_sales),void 0!==e.data.all_sales)for(var t=0;t<e.data.all_sales.length;++t)if(p===e.data.all_sales[t].course_id){ie(!0),de(+e.data.all_sales[t].sale_percent);break}}))}),500)();var t=sessionStorage.getItem("email");if(Be(!0!==U),(null===t||void 0===t||""===t)&&Se(void 0),Se(t),void 0!==$)for(var a=0;a<$.length;++a)if($[a].course_id===p){me(!0),xe(!fe);break}if(void 0!==I){for(var o=!1,c=0;c<I.length;++c)if(+p===+I[c].course_id){o=!0;break}if(!0===o)return void W(!0);W(!1)}if(void 0!==G){for(var n=!1,i=0;i<G.length;++i)if(+p===+G[i].course_id){n=!0,ae(!0);break}return!0===n?void ae(!0):void ae(!1)}}),[I,z,G,$,ye,U,Ne,$e,J,Ee,E]);var Ke=function(e){},Qe=A();return Object(R.jsx)(B.a.Fragment,{children:Object(R.jsxs)(d.a,{className:Qe.card,children:[Object(R.jsx)(i.a,{onClick:Ke,children:Object(R.jsxs)(u.a,{children:[Object(R.jsx)(M.b,{className:Qe.link,to:"/course/".concat(p),children:Object(R.jsx)(g.a,{className:Qe.cardMedia,image:"".concat(t),title:"Image title"})}),2===+ze?Object(R.jsx)(i.a,{children:1===+Ee?Object(R.jsx)(M.b,{onClick:He,className:C()(Qe.link,Qe.favo),children:Object(R.jsx)(l.a,{variant:"outlined",size:"small",color:"primary",children:Object(R.jsx)(f.a,{})})}):Object(R.jsx)(M.b,{onClick:He,className:C()(Qe.link,Qe.favo),children:Object(R.jsx)(l.a,{variant:"outlined",size:"small",color:"primary",children:Object(R.jsx)(v.a,{})})})}):"",!0===Q?Object(R.jsx)(i.a,{display:"flex",px:8,justifyContent:"flex-start",width:"100%",children:Object(R.jsx)(s.a,Object(c.a)(Object(c.a)({className:Qe.badge_bestSeller,variant:"standard",badgeContent:"Best seller"},F),{},{anchorOrigin:{vertical:"bottom",horizontal:"left"}}))}):!0===te?Object(R.jsx)(i.a,{display:"flex",px:8,justifyContent:"flex-start",width:"100%",children:Object(R.jsx)(s.a,{className:Qe.badge_newest,variant:"standard",badgeContent:"New",anchorOrigin:{vertical:"bottom",horizontal:"left"}})}):Object(R.jsx)(i.a,{}),Object(R.jsxs)(j.a,{className:Qe.cardContent,children:[Object(R.jsx)(_.a,{className:Qe.typo,gutterBottom:!0,variant:"h6",component:"p",children:n}),Object(R.jsx)(_.a,{className:Qe.typo,children:m}),Object(R.jsxs)(_.a,{className:Qe.typo,children:[" ",O]}),Object(R.jsxs)(_.a,{className:Qe.typo,children:["Rate: ",S]}),ne?Object(R.jsxs)(B.a.Fragment,{children:[Object(R.jsxs)(_.a,{className:C()(Qe.typo,Qe.sale),children:[a,"$"]}),Object(R.jsxs)(_.a,{className:Qe.typo,children:[" ","Sale: ",a-Math.floor(a*le/100),"$"," "]})]}):Object(R.jsxs)(_.a,{className:Qe.typo,children:[a,"$"]})]})]})}),void 0!==ye?Object(R.jsxs)(b.a,{className:Qe.card_action,children:[2===ze||4===ze?Object(R.jsx)(l.a,{variant:"contained",size:"small",color:"primary",disabled:!0===pe,onClick:function(e){var o=sessionStorage.getItem("user_login_id");L(p,+o,a,t,n,h)},children:"Buy"}):Object(R.jsx)("div",{children:3===ze&&k===+sessionStorage.getItem("user_login_id")?Object(R.jsx)(r.a,{className:Qe.checkbox,control:Object(R.jsx)(T,{checked:Ae,onChange:function(e){var t=sessionStorage.getItem("user_login_id");Fe(e.target.checked);var a={is_finished:e.target.checked,course_id:p,user_id:t},o="".concat(D.b,"/api/instructor/toggle-finished-course/");y.a.patch(o,a,{}).then((function(e){})),Ue(!$e)},name:"checkedG"}),label:"Is finished"}):""}),Object(R.jsx)(M.b,{onClick:Ke,className:Qe.link,to:"/course/".concat(p),children:Object(R.jsx)(l.a,{variant:"outlined",size:"small",color:"primary",children:"Detail"})})]}):Object(R.jsx)(B.a.Fragment,{})]})})}))}}]);
//# sourceMappingURL=20.ab3e843a.chunk.js.map